import n from"axios";import e from"moment";import r from"nprogress";import t from"alertifyjs";import"jquery";var o={options:{},setOptions:function(n){return this.options=n,this},ajax:function(e,t,o,s){var a=this;void 0===s&&(s=!0),s&&(r.start(),console.log("start nprogress")),console.log("ajax"),n.post(e,t).then(function(n){"success"==n.data.status?(n.data.messages&&a.messages(n.data.messages),n.data.warnings&&a.warnings(n.data.warnings),o(n.data.data)):(console.log(n),n.data.errors&&a.errors(n.data.errors))}).catch(function(n){n.response&&n.response&&"419"===n.response.status?(a.console(n),a.errors(["Login expired, try to login again."])):n.response?(a.errors([n.response.data]),a.console(n.response.data),a.console(n.response.status),a.console(n.response.headers)):n.request?(a.console(n.request),a.errors(["Server not responding"])):(console.error(n),a.errors(["Error: check console"]))})},ajaxGet:function(e,t,o,s){var a=this;void 0===s&&(s=!0),s&&(r.start(),console.log("start nprogress")),window.axios.defaults.headers.common={"X-Requested-With":"XMLHttpRequest"},console.log("ajax"),n.get(e,t).then(function(n){"success"==n.data.status?(n.data.messages&&a.messages(n.data.messages),n.data.warnings&&a.warnings(n.data.warnings),o(n.data.data)):(console.log(n),n.data.errors&&a.errors(n.data.errors))})},warnings:function(n){$.each(n,function(n,e){t.error(e)})},errors:function(n){$.each(n,function(n,e){t.error(e)}),this.stopNprogress()},confirm:function(n,e,r){t.confirm(n,function(n){if(!n)return!1;e(r)})},messages:function(n){$.each(n,function(n,e){t.success(e)})},success:function(n){void 0===n&&(n="success"),t.success(n)},stopNprogress:function(){r.done()},console:function(n,e){1==$("#debug").attr("content")&&(e?console.log(e,n):console.log(n))},findAndReplaceString:function(n,e,r){return r.replace(n,e)},findAndReplace:function(n,e,r){for(var t=null,o=0;o<n.length;o++)n[o][e]==r[e]&&(t=o);return null!=t&&(n[t]=r,n)},updateArray:function(n,e){var r=n.indexOf(e);return n[r]=e,n},removeFromArray:function(n,e){var r=n.map(function(n){return n}).indexOf(e);return console.log("index",r),n.splice(r,1)},findInArrayByKey:function(n,e,r){if(!Array.isArray(n))return!1;var t=null;return n.map(function(n,o){n[e]==r&&(t=n)}),t},removeInArrayByKey:function(n,e,r){return!!Array.isArray(n)&&(console.log("array===>",n),n.map(function(t,o){t[r]==e[r]&&n.splice(o,1)}),n)},existInArray:function(n,e){return-1!=n.indexOf(e)},existInArrayByKey:function(n,e,r){var t=!1;return!!Array.isArray(n)&&(n.map(function(n){n[r]==e[r]&&(t=!0)}),t)},splitString:function(n,e){return""!=n&&null!=n&&n.length>e&&(n=n.substring(0,e)+"..."),n},formatDate:function(n){return n?e(n).format("YYYY-MM-DD"):""},fromNow:function(n){return n?e(n).fromNow():null},currentDate:function(){return e().format("YYYY-MM-DD")},currentDateTime:function(){return e().format("YYYY-MM-DD HH:mm:ss")},dateForHumans:function(n){return n?e(n).format("ddd, MMM DD, YYYY"):null},dateTimeForHumans:function(n){return n?e(n).format("YYYY-MM-DD hh:mm A"):null},dateTimeForHumansWithDay:function(n){return n?e(n).format("YYYY MMM DD hh:mm A (dddd)"):null},checkPermission:function(n){return this.permissions.indexOf(n)>-1},paginate:function(n,e){n.preventDefault(),this.current_page=e,this.listLoader()},makePagination:function(n){this.pagination=Pagination.Init(n.last_page,this.current_page,3)},paginateIsActive:function(n){return n==this.current_page},toIndianFormat:function(n){if(n<0)return n;for(var e=(n+="").split("."),r=e[0],t=e.length>1?"."+e[1]:"",o=/(\d+)(\d{3})/,s=0,a=String(r).length,i=parseInt(a/2-1);o.test(r)&&(s>0?r=r.replace(o,"$1,$2"):(r=r.replace(o,"$1,$2"),o=/(\d+)(\d{2})/),s++,0!=--i););return r+t},currencyToSymbol:function(n){return"USD"==n?"&#36;":"INR"==n?"&#8377;":n},setCookies:function(n,e,r){var t=new Date;t.setDate(t.getDate()+r);escape(e),null==r||t.toUTCString();document.cookie=n+"="+e},getCookies:function(n){var e,r,t,o=document.cookie.split(";");for(e=0;e<o.length;e++)if(r=o[e].substr(0,o[e].indexOf("=")),t=o[e].substr(o[e].indexOf("=")+1),(r=r.replace(/^\s+|\s+$/g,""))==n)return unescape(t)},deleteCookies:function(n){this.setCookies(n,void 0,-1)},shiftToTop:function(n,e,r){for(var t=null,o=0;o<n.length;o++)n[o][e]==r&&(t=o);if(null!=t){var s=t;if(0>=n.length)for(var a=0-n.length;1+a--;)n.push(void 0);return n.splice(0,0,n.splice(s,1)[0]),n}},timeDifferenceInSeconds:function(n,r){return e(r,"YYYY-MM-DD HH:mm:ss").diff(e(n,"YYYY-MM-DD HH:mm:ss"))/1e3},secondsToHoursMinutsSeconds:function(n){var r=1e3*n,t=e.duration(r);return Math.floor(t.asHours())+e.utc(r).format(":mm:ss")},getTimeDifferenceInHHMMSS:function(n,e){var r=this.timeDifferenceInSeconds(n,e);return this.secondsToHoursMinutsSeconds(r)},secondsToHours:function(n){var r=1e3*n;return e.duration(r).asHours()},getTimeDifferenceInDays:function(n,r){if(!n||!r)return null;var t=e(n,"YYYY-MM-DD"),o=e(r,"YYYY-MM-DD");return t.diff(o,"days")},addTagToOneSignalUser:function(n,e){OneSignal&&OneSignal.push(function(){OneSignal.getUserId(function(r){OneSignal.sendTag(n,e)})})},deleteTagToOneSignalUser:function(n){OneSignal&&OneSignal.push(function(){OneSignal.getUserId(function(e){OneSignal.deleteTag(n)})})},openUrl:function(n,e){n&&n.preventDefault(),window.open(e,"_blank")},uploadFiles:function(n,e,r){void 0===r&&(r=null),$(n).on("click",".upload_button",function(){var t,o=[],s=$("base").attr("href")+"/core/fileUploader";r&&(s+="?folder_name="+r),$(n+" .upload_button").fileupload({url:s,dataType:"json",add:function(e,r){var s=r.files[0].name;s.replace(/[^a-z0-9\s]/gi,"").replace(/[_.\s]/g,"-");if(-1!==$.inArray(s,t))return alert("Filename already exist"),!1;t=[s],o.push(r.files[0]),$(n+" .file_progress").show(),console.log("--\x3e",r);r.submit().error(function(n,e,r){return alert("Error: "+e+" | "+r),!1})},progress:function(e,r){var t=parseInt(r.loaded/r.total*100,10);$(n+".progress-bar").css("width",t+"%")},done:function(r,t){r.preventDefault();t.files[0].name.replace(/[^a-z0-9\s]/gi,"").replace(/[_.\s]/g,"-");e(t.result.files),$(n+" .file_progress").hide(),$(n+" .progress-bar").css("width","0%")},_initProgressListener:function(n){var e=this,r=n.xhr?n.xhr():$.ajaxSettings.xhr();r.upload&&r.upload.addEventListener&&(r.upload.addEventListener("progress",jQuery.throttle(100,function(r){e._onProgress(r,n)}),!1),n.xhr=function(){return r})}})})},uploadSummernoteImage:function(n,e){data=new FormData,data.append("file",n);var r=$("base").attr("href");$.ajax({data,type:"POST",url:r+"/core/ajax/uploader",cache:!1,contentType:!1,processData:!1,success:function(n){$(e).summernote("insertImage",n,"filename")}})},remainingCharacters:function(n,e,r,t){n&&n.preventDefault();var o=n.target,s=$(o).val().length,a=r-s,i="min:"+e+" | max:"+r;s<e?(i+="<span class='yellow-800'> | written: "+s+" | remaining: "+a+"</span>",$(t).html(i)):a<0?(i+="<span class='red-800'> | written: "+s+" | remaining: "+a+"</span>",$(t).html(i)):(i+="<span class='blue-800'> | written: "+s+" | remaining: "+a+"</span>",$(t).html(i))},randomString:function(n){void 0===n&&(n=6);for(var e="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=0;t<n;t++)e+=r.charAt(Math.floor(Math.random()*r.length));return e},updateDocumentUrlTitle:function(n,e){window.history.pushState(null,n,e)},strToSlug:function(n){return n.toLowerCase().replace(/e|é|è|ẽ|ẻ|ẹ|ê|ế|ề|ễ|ể|ệ/gi,"e").replace(/a|á|à|ã|ả|ạ|ă|ắ|ằ|ẵ|ẳ|ặ|â|ấ|ầ|ẫ|ẩ|ậ/gi,"a").replace(/o|ó|ò|õ|ỏ|ọ|ô|ố|ồ|ỗ|ổ|ộ|ơ|ớ|ờ|ỡ|ở|ợ/gi,"o").replace(/u|ú|ù|ũ|ủ|ụ|ư|ứ|ừ|ữ|ử|ự/gi,"u").replace(/đ/gi,"d").replace(/\s*$/g,"").replace(/\s+/g,"-")},isInt:function(n){return Number(n)===n&&n%1==0},isFloat:function(n){return Number(n)===n&&n%1!=0},btDropDown:function(n){n&&n.preventDefault();var e=n.target,r=$(e).closest(".dropdown").find(".dropdown-menu");$(r).toggleClass("show")},btDropDownFormGroup:function(n){n&&n.preventDefault();var e=n.target,r=$(e).closest(".btn-group").find(".dropdown-menu");console.log("test"),console.log(r.attr("class")),$(r).toggleClass("show")},btDropDownFormGroupHide:function(n){var e=$(n).closest(".btn-group").find(".dropdown-menu");console.log("test"),console.log(e.attr("class")),$(e).toggleClass("show")}};export default{install:function(n,e){var r=o.setOptions(e);n.prototype.$vaahcms=r,n.vaahcms=r}};
